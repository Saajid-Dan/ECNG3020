{% extends "base.html" %}
{% block content %}
{% include '_report.html' %}

<!-- boundary -->
    <div class='row justify-content-center'>
        <div class="col-12" >
            <h5 class="md-10 text-center text-muted">Internet Exchange Points (Packet Clearing House) - {{ title }}</h5>
        </div>
    </div>

    <div class='row justify-content-center'>
        <div class='col-10'>
            <p>
                Internet exchange point data on {{ title }} is listed on this page.<br>
                <b>Note : </b>
                Tables may have missing data.
            </p>
            
            {% for item in ixp_dir %}
                <p><u>Table {{ loop.index }}a: IXP {{ loop.index }} - {{ item.name }}</u></p>
                <div class="table-responsive">
                    <table class='table table-sm table-hover'>
                        <thead>
                            <tr class='table-primary'>
                                <th colspan="2">IXP {{ loop.index }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Name</td>
                                <td>{{ item.name }}</td>
                            </tr>                            
                            <tr>
                                <td>Status</td>
                                <td>{{ item.status }}</td>
                            </tr>
                            <tr>
                                <td>City</td>
                                <td>{{ item.city }}</td>
                            </tr>
                            <tr>
                                <td>Latitude/°</td>
                                <td>{{ '%0.3f' | format(item.lat | float) }}</td>
                            </tr>
                            <tr>
                                <td>Longitude/°</td>
                                <td>{{ '%0.3f' | format(item.lon | float) }}</td>
                            </tr>
                            <tr>
                                <td>Average Throughput (IPv4)</td>
                                <td>{{ item.ipv4_avg }}</td>
                            </tr>
                            <tr>
                                <td>Peak Throughput (IPv4)</td>
                                <td>{{ item.ipv4_pk }}</td>
                            </tr>
                            <tr>
                                <td>Average Throughput (IPv6)</td>
                                <td>{{ item.ipv6_avg }}</td>
                            </tr>
                            <tr>
                                <td>No. of Participants</td>
                                <td>{{ item.num_prts }}</td>
                            </tr>
                            <tr>
                                <td>No. of Prefixes</td>
                                <td>{{ item.num_prfs }}</td>
                            </tr>
                            <tr>
                                <td>Date Established</td>
                                <td>{{ item.date }}</td>
                            </tr>
                            <tr>
                                <td>Last Updated</td>
                                <td>{{ item.updated }}</td>
                            </tr>
                            <tr>
                                <td>IXP Homepage</td>
                                <td><a href={{ item.url_home }} target="_blank" rel="noopener noreferrer">{{ item.url }}</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
            {% endfor %}
            
            <p><b>Internet Exchange Point Subnet Details</b></p>
            <p>Data on IXP subnet details are listed in this section.</p>

            {% for item in ixp_sub %}
                <p><u>Table {{ loop.index }}b: IXP Subnet Details - {{ item.name_lng }}</u></p>
                <div class="table-responsive">
                    <table class='table table-sm table-hover'>
                        <thead>
                            <tr class='table-primary'>
                                <th colspan="2">IXP Subnet Details - {{ item.name_lng }}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Short Name</td>
                                <td>{{ item.name }}</td>
                            </tr>
                            <tr>
                                <td>Long Name</td>
                                <td>{{ item.name_long }}</td>
                            </tr>
                            <tr>
                                <td>Status</td>
                                <td>{{ item.status }}</td>
                            </tr>
                            <tr>
                                <td>Version</td>
                                <td>{{ item.version }}</td>
                            </tr>
                            <tr>
                                <td>Subnet ID</td>
                                <td>{{ item.num_sub }}</td>
                            </tr>
                            <tr>
                                <td>MLPA</td>
                                <td>{{ item.mlpa }}</td>
                            </tr>
                            <tr>
                                <td>Average Traffic</td>
                                <td>{{ item.avg_traf }}</td>
                            </tr>
                            <tr>
                                <td>No. of Participants</td>
                                <td>{{ item.num_prts }}</td>
                            </tr>
                            <tr>
                                <td>Traffic URL</td>
                                <td><a href={{ item.url_traf }} target="_blank" rel="noopener noreferrer">{{ item.url_traf }}</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <br>
            {% endfor %}
                
            {% if ixp_mem %}
                <p><b>Internet Exchange Point Subnet Members</b></p>
                <p>Data on IXP subnet members are listed in this section</p>

                <p><u>Table 1c: IXP Subnet Members</u></p>
                <div class="table-responsive">
                    <table class='table table-sm table-hover table-bordered'>
                        <thead>
                            <tr class='table-primary'>
                                <th>IP Address</th>
                                <th>FQDN</th>
                                <th>Ping</th>
                                <th>ASN</th>
                                <th>Organisation</th>
                                <th>Peering Policy</th>
                                <th>Prefixes</th>
                                <th>Version</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for item in ixp_mem %}
                                <tr>
                                    <td>{{ item.ip_adr }}</td>
                                    <td>{{ item.fqdn }}</td>
                                    <td>{{ item.ping }}</td>
                                    <td>{{ item.asn }}</td>
                                    <td>{{ item.org_name }}</td>
                                    <td>{{ item.peer_pol }}</td>
                                    <td>{{ item.num_prfs }}</td>
                                    <td>{{ item.version }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <br>
            {% endif %}
                    
            <p><i>
                Source: Packet Clearing House<br>
                URL: <a href='https://www.pch.net/' target="_blank" rel="noopener noreferrer">https://www.pch.net/</a><br>
                Last Updated: 
            </i></p>
        </div>
    </div>
<!-- boundary -->
{% endblock %}