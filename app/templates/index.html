{% extends "base.html" %}
{% block content %}

    <!-- Declaration of Map Title -->
    <div class='row justify-content-center'>
        <div class="col-12" >
            <h5 class="md-10 text-center text-muted" style="margin-bottom: 15px;">Map of Caribbean ICT Infrastructure and Demographic Data</h5>
        </div>
    
        <!-- Map HTML file -->
        <div class="col-10">
            <iframe id='map' src='/static/html/map.html' width="100%" height="400px" style="border: thin solid rgb(200, 200, 200)"></iframe>
        </div>
    
        <!-- Legend -->
        <div class="col-10" style="margin-top: 1em; margin-bottom: 1em;">
            <a class="btn btn-primary" data-bs-toggle="collapse" href="#Collapse1" role="button" aria-expanded="false" aria-controls="Collapse1" style="width: 100%;">Legend</a> 
        </div>

        <!-- Legend Collapse -->
        <div class="collapse col-10" id="Collapse1" style="margin-top: 0.5em;">
            <div class="card card-body">
                {% include '_legend.html' %}
            </div>
        </div>

    <br><hr>

    <!-- Toggle Countries Dropdowns -->
        <div class="col-12" >
            <h5 class="md-10 text-center text-muted" style="margin-bottom: 15px;">Country Comparisons</h5>
        </div>

        <div class="col-10" >
            <p>
                Graphs are separated into categories of internet infrastructure, interent adoption and internet use.
                Graph categories can be selected using the dropdown.<br><br>
                <b>Plots</b> on graphs are <b>initially disabled</b>.
                They can be <b>enabled</b> by selecting a country from the multichoice dropdown titled "Select a Country".<br><br>
                <b>Plots</b> can be disabled using the <b>Clear Selection</b> button.
                <b>All Plots</b> can be enabled using the <b>All Selection</b> button.
                <b>Note: </b>
                Some graphs are blank as there are no available data to plot.
                Some graphs may have discontinuities because of missing data.<br><br>
                <b><u>Check out the pages under the Data Listing dropdown (nav bar) to view all available data.</u></b>
            </p>
        </div>    
    <hr>
        <!-- Dropdown -->
        <div class="col-10">
            <select name="categories" class="form-select" id='categories' onchange="changeGraph('categories', 'iframe')" required>
                <option value='0'>Internet Infrastructure</option>
                <option value='1'>Internet Adoption</option>
                <option value='2'>Internet Use</option>
            </select>
        </div>

        <!-- Graph iframe -->
        <div class="col-10">
            <iframe id='iframe' src='/static/html/graph_infr.html' width="100%" height="500px"></iframe>
        </div>
    </div>
    
    <script>
        // Cycle between graph categories
        function changeGraph(dropdown, iframe) {
            var dropdown = document.getElementById(dropdown)
            var iframe = document.getElementById(iframe)

            if (dropdown.value == '0'){ 
                iframe.src = '/static/html/graph_infr.html'
            }
            else if (dropdown.value == '1'){
                iframe.src = '/static/html/graph_adop.html'
            }
            else if (dropdown.value == '2'){
                iframe.src = '/static/html/graph_use.html'
            }
        }
    </script>
{% endblock %}